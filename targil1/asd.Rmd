---
title: "ex1"
author: '20474862'
date: "20 באפריל 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#we will use readxl library to read .xls files
library("readxl")
```

1.1 First we will want to load our Pisa test excel files. To do that, we'll define our work directory to be the folder that contains the 'pisa.xlsx' file, with the command wordkir.
As the 'pisa.xlsx' contains 3 sheets, we will load each of them to a different reference.

```{r}
workdir = "C:/Users/Liav/Desktop/Uni/R/targil1"
setwd(workdir)

pisa_math = read_excel("pisa.xlsx", sheet=1)
pisa_reading = read_excel("pisa.xlsx", sheet=2)
pisa_science = read_excel("pisa.xlsx", sheet=3)

```

To get a clue about how the data looks like, we can use the head command to pring the first rows of it. Let's make an example with pisa_math.

```{r}
head(pisa_math)
```

Since all the worksheets share the same columns names, to differ them, we can change some of the columns name.
```{r}
colnames(pisa_math)[2] = "math_score"
colnames(pisa_reading)[2] = "reading_score"
colnames(pisa_science)[2] = "science_score"  

```

1.2 We would like to check who were the leading countries in every field in 2015. To do so, we will sort by descending order the 2015 year subset. This command might seem very complicated, let's try to explain it simply:
1. head command (x, n= 3L) is the same head command we used before, but now we used "n=3L" to get the first 3 lines.
2. pisa_math[y, year=2015] command gives us a susbet of the pisa_math rows that their value in column 'year' equals to 2015.
   notice that pisa_math is the name of the dataframe, we can change it later to another name for the other dataframes.
3. order(pisa_math$math_score, decreasing = TRUE) returns the data decreasing order if the data frame be the pisa_math column.

To connect those three simple functions we can write the 3rd function instead of y, and the joined 2nd function (with 3 insted of y) instead of x, and now we got the 3 first countries orederd by scores, only when year was 2015.
```{r}
head(subset(pisa_math[order(pisa_math$math_score, decreasing = TRUE), ], year == 2015), n=3L)
head(subset(pisa_science[order(pisa_science$science_score, decreasing = TRUE), ], year == 2015), n=3L)
head(subset(pisa_reading[order(pisa_reading$reading_score, decreasing = TRUE), ], year == 2015), n=3L)

```
## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


